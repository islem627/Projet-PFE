<div class="destination-container">
  <div class="header">
    <!-- Add this home button -->
    <button class="home-btn" routerLink="/">
      <i class="fas fa-home"></i>
    </button>
    
    <h2><i class="fas fa-map-marked-alt"></i> Tunisian Destinations</h2>
    
    <div class="controls">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search destinations..." 
               [(ngModel)]="searchTerm" 
               (input)="filterDestinations()">
      </div>
      <button class="add-btn" (click)="openAddForm()">
        <i class="fas fa-plus"></i> Add Destination
      </button>
    </div>
  </div>

  <div id="destinationMap"></div>

  <div class="destination-list">
    <div *ngFor="let dest of filteredDestinations" class="destination-card">
      <div class="card-header">
        <h3>{{ dest.name }}</h3>
        <div class="location-badge">
          <i class="fas fa-city"></i> {{ dest.city }}
        </div>
        <span class="status-badge" [class.active]="dest.status === 'Active'">
          {{ dest.status }}
        </span>
      </div>
      <div class="card-body">
        <p><i class="fas fa-map-marker-alt"></i> {{ dest.address }}</p>
        <p><i class="fas fa-phone"></i> {{ dest.contactPhone }}</p>
        <div class="delivery-info">
          <span><i class="fas fa-money-bill-wave"></i> {{ dest.deliveryFee }} TND</span>
          <span><i class="fas fa-clock"></i> {{ dest.deliveryTime }}</span>
        </div>
        <p class="coordinates">
          <i class="fas fa-globe-africa"></i> 
          {{ dest.lat | number:'1.4-4' }}, {{ dest.lng | number:'1.4-4' }}
        </p>
      </div>
      <div class="card-footer">
        <button (click)="openEditForm(dest)">
          <i class="fas fa-edit"></i> Edit
        </button>
        <button (click)="toggleStatus(dest.id)">
          <i class="fas" [class.fa-toggle-on]="dest.status === 'Active'" 
                      [class.fa-toggle-off]="dest.status !== 'Active'"></i> 
          {{ dest.status === 'Active' ? 'Deactivate' : 'Activate' }}
        </button>
        <button class="delete-btn" (click)="deleteDestination(dest.id)">
          <i class="fas fa-trash"></i> Delete
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="isFormOpen" class="form-overlay">
    <div class="form-container">
      <h3>{{ isEditMode ? 'Edit Destination' : 'Add Destination' }}</h3>
      <button class="close-btn" (click)="closeForm()">
        <i class="fas fa-times"></i>
      </button>
      
      <form [formGroup]="destinationForm" (ngSubmit)="handleSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label>Name</label>
            <input type="text" formControlName="name">
          </div>
          <div class="form-group">
            <label>City</label>
            <select formControlName="city">
              <option *ngFor="let city of tunisianCities" [value]="city">{{city}}</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Address</label>
          <input type="text" formControlName="address">
        </div>

        <div class="form-row">
          <div class="form-group coord-field">
            <label>Latitude</label>
            <input type="number" formControlName="lat" step="0.0001">
          </div>
          <div class="form-group coord-field">
            <label>Longitude</label>
            <input type="number" formControlName="lng" step="0.0001">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Phone</label>
            <input type="tel" formControlName="contactPhone" placeholder="8 digits">
          </div>
          <div class="form-group">
            <label>Delivery Fee (TND)</label>
            <input type="number" formControlName="deliveryFee" min="0">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Delivery Time</label>
            <select formControlName="deliveryTime">
              <option value="1-2 days">1-2 days</option>
              <option value="2-3 days">2-3 days</option>
              <option value="3-5 days">3-5 days</option>
            </select>
          </div>
          <div class="form-group">
            <label>Status</label>
            <select formControlName="status">
              <option value="Active">Active</option>
              <option value="Inactive">Inactive</option>
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="cancel-btn" (click)="closeForm()">Cancel</button>
          <button type="submit" [disabled]="destinationForm.invalid" class="submit-btn">
            {{ isEditMode ? 'Update' : 'Save' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>