<nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
  <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-start">
    <a class="navbar-brand brand-logo" href="index.html"><img src="assets/images/logo.svg" alt="logo" /></a>
    <a class="navbar-brand brand-logo-mini" href="index.html"><img src="assets/images/logo-mini.svg" alt="logo" /></a>
  </div>
  <div class="navbar-menu-wrapper d-flex align-items-stretch">
    <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
      <span class="mdi mdi-menu"></span>
    </button>
    <div class="search-field d-none d-md-block">
      <form class="d-flex align-items-center h-100" action="#">
        <div class="input-group">
          <div class="input-group-prepend bg-transparent">
            <i class="input-group-text border-0 mdi mdi-magnify"></i>
          </div>
          <input type="text" class="form-control bg-transparent border-0" placeholder="Search projects">
        </div>
      </form>
    </div>
    <ul class="navbar-nav navbar-nav-right">
      <li class="nav-item nav-profile dropdown">
        <a class="nav-link dropdown-toggle" id="profileDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
          <div class="nav-profile-img">
            <img src="assets/images/faces/face1.jpg" alt="image">
            <span class="availability-status online"></span>
          </div>
          <div class="nav-profile-text">
            <p class="mb-1 text-black">David Greymaax</p>
          </div>
        </a>
        
   <!--
        <div class="dropdown-menu navbar-dropdown" aria-labelledby="profileDropdown">
          <a class="dropdown-item" href="#">
            <i class="mdi mdi-cached me-2 text-success"></i> Activity Log </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">
            <i class="mdi mdi-logout me-2 text-primary"></i> Signout </a>
        </div>
      </li>
      <li class="nav-item d-none d-lg-block full-screen-link">
        <a class="nav-link">
          <i class="mdi mdi-fullscreen" id="fullscreen-button"></i>
        </a>
      </li>
      -->


      

      <li class="nav-item dropdown">
        <a class="nav-link count-indicator dropdown-toggle" href="#" id="notifDropdown" role="button"
           data-bs-toggle="dropdown" aria-expanded="false" (click)="getLivreurFromCommandes()">
          <i class="mdi mdi-truck-delivery"></i>
          <span class="count-symbol bg-primary" *ngIf="livreurs.length > 0"></span>
        </a>
      
        <div class="dropdown-menu dropdown-menu-end navbar-dropdown" aria-labelledby="notifDropdown">
          <div id="livreurList" class="dropdown-item">
            <!-- Loading -->
            <ng-container *ngIf="loading">
              <p class="dropdown-item">Chargement...</p>
            </ng-container>
      
            <!-- Aucun livreur -->
            <ng-container *ngIf="!loading && livreurs.length === 0">
              <p class="dropdown-item">Aucun livreur assigné</p>
            </ng-container>
      
            <!-- Liste des livreurs -->
            <div *ngFor="let livreur of livreurs" class="dropdown-item">
              <div class="d-flex align-items-center">
                <img [src]="'http://localhost:8762/User/files/' + (livreur.photo || 'default-image.jpg')" class="me-2 rounded-circle" alt="livreur" width="40" height="40">
                <div class="ms-2">
                  <p class="mb-0 fw-bold">{{ livreur.firstname }} {{ livreur.lastname }}</p>
                  <p class="mb-0 small text-muted">Téléphone: {{ livreur.phone }}</p>
                  <a [routerLink]="['/chat', livreur.id]" class="btn btn-sm btn-outline-primary mt-1">Contacter</a>
                </div>
              </div>
              <hr class="my-2">
            </div>
          </div>
        </div>
      </li>
      

       

        
        <!--
        <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list" aria-labelledby="messageDropdown">
          <h6 class="p-3 mb-0">Messages</h6>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item preview-item">
            <div class="preview-thumbnail">
              <img src="assets/images/faces/face4.jpg" alt="image" class="profile-pic">
            </div>
            <div class="preview-item-content d-flex align-items-start flex-column justify-content-center">
              <h6 class="preview-subject ellipsis mb-1 font-weight-normal">Mark send you a message</h6>
              <p class="text-gray mb-0"> 1 Minutes ago </p>
              
            </div>
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item preview-item">
            <div class="preview-thumbnail">
              <img src="assets/images/faces/face2.jpg" alt="image" class="profile-pic">
            </div>
            <div class="preview-item-content d-flex align-items-start flex-column justify-content-center">
              <h6 class="preview-subject ellipsis mb-1 font-weight-normal">Cregh send you a message</h6>
              <p class="text-gray mb-0"> 15 Minutes ago </p>
            </div>
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item preview-item">
            <div class="preview-thumbnail">
              <img src="assets/images/faces/face3.jpg" alt="image" class="profile-pic">
            </div>
            <div class="preview-item-content d-flex align-items-start flex-column justify-content-center">
              <h6 class="preview-subject ellipsis mb-1 font-weight-normal">Profile picture updated</h6>
              <p class="text-gray mb-0"> 18 Minutes ago </p>
            </div>
          </a>
          <div class="dropdown-divider"></div>
          <h6 class="p-3 mb-0 text-center">4 new messages</h6>
        </div>
      </li>
    -->
      
<!--****-->
  <!--****-->
  <!--
  <li class="nav-item dropdown">
    <a 
    class="nav-link count-indicator dropdown-toggle" 
    id="notificationDropdown" 
    href="#" 
    (click)="toggleNotifications()" 
    style="max-height: 300px; overflow-y: auto; width: 300px; right: 0;">
    <i class="mdi mdi-bell-outline">
      <span *ngIf="notificationCount > 0" class="notification-badge">
        {{ notificationCount }}
      </span>
    </i>
  </a>
 
  <div 
    *ngIf="showNotifications" 
    class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list show"
    (click)="$event.stopPropagation()"
    style="max-height: 300px; overflow-y: auto; width: 300px;">
    
    <button *ngIf="messages.length > 0" class="clear-btn" (click)="clearAllNotifications()">
      Supprimer toutes les notifications
    </button>
  
    <h6 class="p-3 mb-0">Notifications</h6>
    <div class="dropdown-divider"></div>
  
    <ng-container *ngIf="messages.length > 0; else noNotifications">
      <div *ngFor="let msg of messages; let i = index" class="dropdown-item preview-item" 
           [ngClass]="getNotificationClass(msg.status)" 
           (click)="markAsRead(i)">  
        <div class="d-flex align-items-center justify-content-between">
          <div class="preview-thumbnail">
            <div class="preview-icon">
              <i class="mdi mdi-bell"></i>
            </div>
          </div>
          <div class="preview-item-content">
            <h6 class="preview-subject">{{ msg.message }}</h6>
            <span class="text-muted small">{{ msg.date }}</span>
          </div>
          <button class="btn-delete" (click)="deleteNotification(i)">
            <i class="mdi mdi-delete"></i>
          </button>
        </div>
      </div>
    </ng-container>
  
    <ng-template #noNotifications>
      <div class="p-3 text-center text-muted">Aucune notification</div>
    </ng-template>
  
    <div class="dropdown-divider"></div>
    <h6 class="p-3 mb-0 text-center">Voir toutes les notifications</h6>
  </div>
  </li>
  
  -->


  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Client Dashboard</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="notificationsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Notifications <span class="badge bg-primary">{{ notifications.length }}</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notificationsDropdown">
              <li *ngFor="let notification of notifications">
                <a class="dropdown-item" href="#">
                  {{ notification.message }} <br>
                  <small>{{ notification.date | date:'short' }}</small>
                </a>
              </li>
              <li *ngIf="notifications.length === 0">
                <a class="dropdown-item" href="#">Aucune notification</a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Déconnexion</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!---->
   <!--   <li class="nav-item nav-logout d-none d-lg-block">
        <a class="nav-link" href="#">
          <i class="mdi mdi-power"></i>
        </a>
      </li>
      -->
      <li class="nav-item nav-logout d-none d-lg-block">
        <a class="nav-link" (click)="logout()">
          <i class="mdi mdi-power"></i>
        </a>
      </li>
      
      <li class="nav-item nav-settings d-none d-lg-block dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="settingsDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="mdi mdi-account"></i>
        </a>
        <div class="dropdown-menu" aria-labelledby="settingsDropdown">
          <a class="dropdown-item" routerLink="/updateprofile">Manage Profile</a>
        </div>
      </li>
  
      
    </ul>
    <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
      <span class="mdi mdi-menu"></span>
    </button>
  </div>

</nav>
